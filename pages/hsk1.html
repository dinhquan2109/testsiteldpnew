<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HSK1 Test - Aloha School</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/components.css">
    <link rel="stylesheet" href="../assets/css/responsive.css">
    <link rel="stylesheet" href="../assets/css/test-pages.css">
</head>
<body>
    <!-- Test Page -->
    <div class="test-page show" id="testPage">
        <div class="test-container">
            <div class="test-header">
                <div class="question-progress">
                    <div class="progress-counter" id="questionCounter">Ph·∫ßn 1: Nghe</div>
                    <div class="progress-circles">
                        <div class="progress-row">
                            <div class="circle">1</div>
                            <div class="circle">2</div>
                            <div class="circle">3</div>
                            <div class="circle">4</div>
                            <div class="circle">5</div>
                        </div>
                    </div>
                </div>
                <div class="timer-section">
                    <div class="timer-icon">‚è±Ô∏è</div>
                    <div class="timer-display" id="timerDisplay">60:00</div>
                </div>
            </div>

            <div class="question-card" id="questionsContainer">
                <!-- Questions will be dynamically rendered here -->
            </div>

            <div class="question-nav">
                <button class="nav-button btn-submit" id="btnSubmit" style="display: none;">N·ªòP B√ÄI</button>
                <button class="nav-button btn-next-section" id="btnNextSection">Ti·∫øp theo ‚Üí</button>
            </div>
            <div class="page-info" id="pageInfo">Ph·∫ßn 1/3 - Nghe</div>
        </div>
    </div>

    <!-- Result Page -->
    <div class="result-page" id="resultPage">
        <div class="result-container">
            <!-- Spiral Binding -->
            <div class="spiral-binding">
                <div class="spiral-hole"></div>
                <div class="spiral-hole"></div>
                <div class="spiral-hole"></div>
                <div class="spiral-hole"></div>
                <div class="spiral-hole"></div>
                <div class="spiral-hole"></div>
                <div class="spiral-hole"></div>
                <div class="spiral-hole"></div>
                <div class="spiral-hole"></div>
                <div class="spiral-hole"></div>
                <div class="spiral-hole"></div>
                <div class="spiral-hole"></div>
                <div class="spiral-hole"></div>
                <div class="spiral-hole"></div>
                <div class="spiral-hole"></div>
            </div>

            <div class="result-logo">
                <div class="logo-lines">
                    <div class="logo-line"></div>
                    <div class="logo-line"></div>
                    <div class="logo-line"></div>
                </div>
            </div>

            <div class="result-content">
                <h1 class="result-title-new">CH√öC M·ª™NG B·∫†N ƒê√É HO√ÄN TH√ÄNH B√ÄI THI HSK1</h1>

                <div class="result-card">
                    <div class="result-info">
                        <strong>H·ªç v√† t√™n:</strong> <span id="resultName"></span>
                    </div>
                    <div class="result-info">
                        <strong>Tr√¨nh ƒë·ªô:</strong> <span id="resultLevel"></span>
                    </div>
                    <div class="result-info">
                        <strong>Th·ªùi gian ho√†n th√†nh:</strong> <span id="completionTime"></span>
                    </div>
                    <div class="result-info">
                        <strong>ƒê√°nh gi√°:</strong> <span id="levelBadge"></span>
                    </div>
                </div>

                <div class="completion-message">
                    <p>
                        Ch√∫c m·ª´ng b·∫°n ƒë√£ ho√†n th√†nh b√†i thi <strong>HSK1 Placement Test</strong> c√πng v·ªõi ALOHA.
                    </p>
                    <p>
                        B·ªô ph·∫≠n T∆∞ v·∫•n Tuy·ªÉn sinh ALOHA s·∫Ω li√™n h·ªá b·∫°n trong th·ªùi gian s·ªõm nh·∫•t ƒë·ªÉ tr·∫£ k·∫øt qu·∫£ b√†i test v√† t∆∞ v·∫•n l·ªô tr√¨nh h·ªçc ph√π h·ª£p.
                    </p>
                    <p id="resultMessage">
                    </p>
                </div>


                <div class="result-buttons">
                    <button class="btn-result home" id="btnFinish"><span>Ho√†n t·∫•t</span></button>
                </div>

                <!-- AI Feedback Section -->
                <div class="ai-feedback-section" id="aiFeedbackSection" style="display: none;">
                    <div class="ai-feedback-header">
                        <h3>ü§ñ Nh·∫≠n x√©t AI cho ph·∫ßn vi·∫øt</h3>
                    </div>
                    <div class="ai-feedback-content" id="aiFeedbackContent">
                        <!-- AI feedback will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Files -->
    <script type="module">
        console.log('üöÄ Loading HSK1 modules...');
        
        try {
            // Load modules in order
            const supabaseConfig = await import('../assets/js/supabase-config.js');
            console.log('‚úÖ supabase-config loaded');
            
            const apiFunctions = await import('../assets/js/api-functions.js');
            console.log('‚úÖ api-functions loaded');
            
            const audioHandler = await import('../assets/js/audio-handler.js');
            console.log('‚úÖ audio-handler loaded');
            
            const timerFunctions = await import('../assets/js/timer-functions.js');
            console.log('‚úÖ timer-functions loaded');
            
            const sectionDisplay = await import('../assets/js/section-display.js');
            console.log('‚úÖ section-display loaded');
            
            const testScoring = await import('../assets/js/test-scoring.js');
            console.log('‚úÖ test-scoring loaded');
            
            const resultDisplay = await import('../assets/js/result-display.js');
            console.log('‚úÖ result-display loaded');
            
            const hsk1Test = await import('../assets/js/hsk1-test.js');
            console.log('‚úÖ hsk1-test loaded');
            
            console.log('üéâ All HSK1 modules loaded successfully');
        } catch (error) {
            console.error('‚ùå Error loading HSK1 modules:', error);
            alert('L·ªói khi t·∫£i HSK1: ' + error.message);
        }
    </script>
</body>
</html>