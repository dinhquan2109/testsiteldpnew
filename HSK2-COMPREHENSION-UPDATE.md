# HSK2 - ThÃªm Pháº§n Äá»c Hiá»ƒu (Comprehension) - CÃ¢u 21-30

## ğŸ“‹ Tá»•ng Quan Thay Äá»•i

ÄÃ£ thÃªm **PHáº¦N 3: Äá»ŒC HIá»‚U** vá»›i 10 cÃ¢u há»i (21-30) vÃ o bÃ i thi HSK2.

### Cáº¥u trÃºc bÃ i thi HSK2 má»›i:
- **CÃ¢u 1-10**: Listening (True/False) - Nghe audio vÃ  chá»n Ä‘Ãºng/sai
- **CÃ¢u 11-20**: Reading (Image Matching) - KÃ©o tháº£ Ä‘Ã¡p Ã¡n A-J vÃ o cÃ¢u há»i
- **CÃ¢u 21-30**: Comprehension (Multiple Choice A/B/C) - Äá»c Ä‘oáº¡n vÄƒn vÃ  chá»n Ä‘Ã¡p Ã¡n

### Tá»•ng Ä‘iá»ƒm:
- **30 cÃ¢u Ã— 2 Ä‘iá»ƒm = 60 Ä‘iá»ƒm**
- Má»—i cÃ¢u: 2 Ä‘iá»ƒm
- KhÃ´ng cÃ³ cÃ¢u thÆ°á»Ÿng

---

## ğŸ¯ Äáº·c Äiá»ƒm Pháº§n Äá»c Hiá»ƒu

### Layout:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“– PHáº¦N 3: Äá»ŒC HIá»‚U                    â”‚
â”‚  Äá»c Ä‘oáº¡n vÄƒn vÃ  chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  [Äoáº¡n vÄƒn hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢y]            â”‚
â”‚  Khoáº£ng 200-300 tá»« tiáº¿ng Trung         â”‚
â”‚  CÃ³ border mÃ u Ä‘á» bÃªn trÃ¡i             â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  21. [A] [B] [C]                       â”‚
â”‚  22. [A] [B] [C]                       â”‚
â”‚  23. [A] [B] [C]                       â”‚
â”‚  ...                                    â”‚
â”‚  30. [A] [B] [C]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### TÃ­nh nÄƒng:
- âœ… **Äoáº¡n vÄƒn chung**: Táº¥t cáº£ 10 cÃ¢u dÃ¹ng chung 1 Ä‘oáº¡n vÄƒn
- âœ… **Layout 1 hÃ ng**: Sá»‘ thá»© tá»± vÃ  3 nÃºt A/B/C náº±m cÃ¹ng 1 hÃ ng
- âœ… **KhÃ´ng cÃ³ text cÃ¢u há»i**: Chá»‰ hiá»ƒn thá»‹ sá»‘ thá»© tá»± vÃ  Ä‘Ã¡p Ã¡n
- âœ… **Hover effect**: NÃºt Ä‘Ã¡p Ã¡n cÃ³ hiá»‡u á»©ng khi rÃª chuá»™t
- âœ… **Selected state**: ÄÃ¡p Ã¡n Ä‘Ã£ chá»n chuyá»ƒn sang mÃ u Ä‘á»
- âœ… **Progress tracking**: VÃ²ng trÃ²n tiáº¿n Ä‘á»™ chuyá»ƒn xanh khi tráº£ lá»i
- âœ… **Auto-save**: ÄÃ¡p Ã¡n tá»± Ä‘á»™ng lÆ°u vÃ o localStorage
- âœ… **Click to jump**: Click vÃ o vÃ²ng trÃ²n Ä‘á»ƒ nháº£y Ä‘áº¿n cÃ¢u há»i

---

## ğŸ“ Files ÄÃ£ Thay Äá»•i

### 1. `assets/js/hsk2-standalone.js`
**Thay Ä‘á»•i:**
- ThÃªm filter `comprehensionQuestions` trong `displayAllQuestions()`
- ThÃªm section render cho comprehension (21-30)
- ThÃªm event listener cho `.comprehension-option` buttons
- Logic tÃ­nh Ä‘iá»ƒm tá»± Ä‘á»™ng há»— trá»£ 30 cÃ¢u

**Code má»›i:**
```javascript
const comprehensionQuestions = hsk2TestQuestions.filter(q => q.section === 'comprehension');

// Render comprehension section
if (comprehensionQuestions.length > 0) {
    const comprehensionStartIdx = listeningQuestions.length + readingQuestions.length;
    const passageText = comprehensionQuestions[0]?.passage_text || 'Äoáº¡n vÄƒn...';
    
    html += `
        <div class="section-header">
            <div class="section-title">ğŸ“– PHáº¦N 3: Äá»ŒC HIá»‚U</div>
        </div>
        <div class="comprehension-section">
            <div class="passage-text">${passageText}</div>
            <div class="comprehension-questions">
                ${comprehensionQuestions.map((q, idx) => {
                    const globalIdx = comprehensionStartIdx + idx;
                    return `
                        <div class="comprehension-question-item">
                            <span class="question-number-inline">${globalIdx + 1}.</span>
                            <div class="comprehension-options">
                                ${['A', 'B', 'C'].map(letter => `
                                    <button class="comprehension-option" 
                                            data-question="${globalIdx}" 
                                            data-answer="${letter}">
                                        ${letter}
                                    </button>
                                `).join('')}
                            </div>
                        </div>
                    `;
                }).join('')}
            </div>
        </div>
    `;
}
```

### 2. `pages/hsk2.html`
**Thay Ä‘á»•i:**
- ThÃªm CSS cho `.comprehension-section`, `.passage-text`, `.comprehension-question-item`, `.comprehension-option`
- ThÃªm progress-row thá»© 3 vá»›i vÃ²ng trÃ²n 21-30

**CSS má»›i:**
```css
.comprehension-section {
    background: white;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.passage-text {
    background: #f8f9fa;
    padding: 25px;
    border-radius: 10px;
    border-left: 4px solid #FF6B6B;
    line-height: 1.8;
    white-space: pre-wrap;
}

.comprehension-question-item {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
}

.comprehension-option {
    width: 60px;
    height: 50px;
    border: 2px solid #ddd;
    background: white;
    border-radius: 8px;
    font-size: 18px;
    cursor: pointer;
}

.comprehension-option.selected {
    background: #FF6B6B;
    color: white;
}
```

### 3. `hsk2-full-setup.sql`
**Thay Ä‘á»•i:**
- ThÃªm column `passage_text` vÃ o báº£ng `hsk2_questions`
- Insert 10 cÃ¢u má»›i (21-30) vá»›i section='comprehension'
- Má»—i cÃ¢u cÃ³ `passage_text` (Ä‘oáº¡n vÄƒn chung) vÃ  `correct_answer` (A/B/C)

**SQL má»›i:**
```sql
CREATE TABLE hsk2_questions (
    id SERIAL PRIMARY KEY,
    order_number INTEGER NOT NULL,
    section VARCHAR(50),
    question_text TEXT,
    correct_answer TEXT,
    audio_url TEXT,
    image_url TEXT,
    passage_text TEXT,  -- â¬…ï¸ Column má»›i
    question_type VARCHAR(50),
    created_at TIMESTAMP DEFAULT NOW()
);

INSERT INTO hsk2_questions (order_number, section, correct_answer, passage_text, question_type) VALUES
(21, 'comprehension', 'A', 'Äoáº¡n vÄƒn máº«u...', 'multiple_choice'),
(22, 'comprehension', 'B', 'Äoáº¡n vÄƒn máº«u...', 'multiple_choice'),
...
(30, 'comprehension', 'A', 'Äoáº¡n vÄƒn máº«u...', 'multiple_choice');
```

### 4. `hsk2-update-comprehension.sql` (File má»›i)
**Má»¥c Ä‘Ã­ch:** File SQL riÃªng Ä‘á»ƒ update Ä‘oáº¡n vÄƒn vÃ  Ä‘Ã¡p Ã¡n cho pháº§n comprehension

**Ná»™i dung:**
- Update `passage_text` cho táº¥t cáº£ cÃ¢u 21-30
- Update `correct_answer` cho tá»«ng cÃ¢u
- Query verify Ä‘á»ƒ kiá»ƒm tra

---

## ğŸš€ HÆ°á»›ng Dáº«n CÃ i Äáº·t

### BÆ°á»›c 1: XÃ³a vÃ  táº¡o láº¡i báº£ng
```sql
-- Má»Ÿ Supabase SQL Editor
-- Copy toÃ n bá»™ ná»™i dung file hsk2-full-setup.sql
-- Paste vÃ  Run
```

### BÆ°á»›c 2: Upload media files (náº¿u chÆ°a cÃ³)
- Audio: 10 files (hsk2_q1.mp3 - hsk2_q10.mp3)
- Images Listening: 10 files (hsk2_q1.jpg - hsk2_q10.jpg)
- Images Reading: 10 files (hsk2_reading_A.jpg - hsk2_reading_J.jpg)

### BÆ°á»›c 3: Update URLs
```sql
-- Má»Ÿ file hsk2-update-answers.sql
-- Thay YOUR_PROJECT_REF báº±ng project ref thá»±c táº¿
-- Run Ä‘á»ƒ update táº¥t cáº£ URLs
```

### BÆ°á»›c 4: Update Ä‘oáº¡n vÄƒn vÃ  Ä‘Ã¡p Ã¡n
```sql
-- Má»Ÿ file hsk2-update-comprehension.sql
-- Thay Ä‘oáº¡n vÄƒn máº«u báº±ng ná»™i dung tháº­t
-- Update Ä‘Ã¡p Ã¡n Ä‘Ãºng cho tá»«ng cÃ¢u (A/B/C)
-- Run
```

### BÆ°á»›c 5: Test
1. Má»Ÿ trang HSK2 test
2. Kiá»ƒm tra 3 sections hiá»ƒn thá»‹ Ä‘Ãºng
3. Kiá»ƒm tra progress circles (1-30)
4. Test chá»n Ä‘Ã¡p Ã¡n cho pháº§n comprehension
5. Test submit vÃ  tÃ­nh Ä‘iá»ƒm

---

## ğŸ“Š Database Schema

### Báº£ng `hsk2_questions` (Ä‘Ã£ update)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Column           â”‚ Type       â”‚ Description                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id               â”‚ SERIAL     â”‚ Primary key                  â”‚
â”‚ order_number     â”‚ INTEGER    â”‚ Thá»© tá»± cÃ¢u há»i (1-30)       â”‚
â”‚ section          â”‚ VARCHAR    â”‚ listening/reading/comprehension â”‚
â”‚ question_text    â”‚ TEXT       â”‚ Text cÃ¢u há»i (optional)     â”‚
â”‚ correct_answer   â”‚ TEXT       â”‚ ÄÃ¡p Ã¡n Ä‘Ãºng                  â”‚
â”‚ audio_url        â”‚ TEXT       â”‚ URL audio (listening only)   â”‚
â”‚ image_url        â”‚ TEXT       â”‚ URL image (listening/reading)â”‚
â”‚ passage_text     â”‚ TEXT       â”‚ Äoáº¡n vÄƒn (comprehension)     â”‚ â¬…ï¸ NEW
â”‚ question_type    â”‚ VARCHAR    â”‚ Loáº¡i cÃ¢u há»i                 â”‚
â”‚ created_at       â”‚ TIMESTAMP  â”‚ Thá»i gian táº¡o                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Dá»¯ liá»‡u máº«u:
```sql
-- Listening (1-10)
section: 'listening'
correct_answer: 'true' or 'false'
audio_url: 'https://...hsk2_q1.mp3'
image_url: 'https://...hsk2_q1.jpg'

-- Reading (11-20)
section: 'reading'
correct_answer: 'A' to 'J'
image_url: 'https://...hsk2_reading_A.jpg'

-- Comprehension (21-30)  â¬…ï¸ NEW
section: 'comprehension'
correct_answer: 'A', 'B', or 'C'
passage_text: 'Äoáº¡n vÄƒn 200-300 tá»«...'
```

---

## âœ… Checklist HoÃ n ThÃ nh

- [x] ThÃªm logic render comprehension section
- [x] ThÃªm event listener cho comprehension options
- [x] ThÃªm CSS cho layout má»›i
- [x] Update progress circles (21-30)
- [x] Update SQL schema vá»›i column `passage_text`
- [x] Táº¡o file SQL setup hoÃ n chá»‰nh (30 cÃ¢u)
- [x] Táº¡o file SQL update riÃªng cho comprehension
- [x] Logic tÃ­nh Ä‘iá»ƒm tá»± Ä‘á»™ng há»— trá»£ 30 cÃ¢u
- [x] Auto-save answers vÃ o localStorage
- [x] Progress tracking cho 30 cÃ¢u
- [x] Document Ä‘áº§y Ä‘á»§ trong file README

---

## ğŸ”§ Troubleshooting

### Váº¥n Ä‘á» 1: KhÃ´ng hiá»ƒn thá»‹ pháº§n comprehension
**NguyÃªn nhÃ¢n:** ChÆ°a cÃ³ data trong database  
**Giáº£i phÃ¡p:** Cháº¡y láº¡i file `hsk2-full-setup.sql`

### Váº¥n Ä‘á» 2: Äoáº¡n vÄƒn hiá»ƒn thá»‹ bá»‹ lá»—i format
**NguyÃªn nhÃ¢n:** Äoáº¡n vÄƒn cÃ³ kÃ½ tá»± Ä‘áº·c biá»‡t  
**Giáº£i phÃ¡p:** DÃ¹ng `white-space: pre-wrap` trong CSS (Ä‘Ã£ cÃ³ sáºµn)

### Váº¥n Ä‘á» 3: Progress circles khÃ´ng update
**NguyÃªn nhÃ¢n:** Event listener chÆ°a Ä‘Æ°á»£c attach  
**Giáº£i phÃ¡p:** Check console log, refresh trang

### Váº¥n Ä‘á» 4: TÃ­nh Ä‘iá»ƒm sai
**NguyÃªn nhÃ¢n:** ÄÃ¡p Ã¡n trong database khÃ´ng khá»›p vá»›i Ä‘Ã¡p Ã¡n user chá»n (phÃ¢n biá»‡t hoa/thÆ°á»ng)  
**Giáº£i phÃ¡p:** Code Ä‘Ã£ dÃ¹ng `.toLowerCase()` Ä‘á»ƒ so sÃ¡nh, Ä‘áº£m báº£o Ä‘Ã¡p Ã¡n trong DB viáº¿t hoa Ä‘Ãºng (A/B/C)

---

## ğŸ“ Notes

- Äoáº¡n vÄƒn hiá»‡n táº¡i lÃ  máº«u, cáº§n thay báº±ng ná»™i dung tháº­t tá»« Ä‘á» thi HSK2
- ÄÃ¡p Ã¡n Ä‘Ãºng cáº§n Ä‘Æ°á»£c set chÃ­nh xÃ¡c trong database
- Test ká»¹ trÆ°á»›c khi deploy production
- Backup database trÆ°á»›c khi cháº¡y DROP TABLE

---

## ğŸ‰ Káº¿t Quáº£

âœ… BÃ i thi HSK2 giá» cÃ³ Ä‘áº§y Ä‘á»§ 30 cÃ¢u há»i  
âœ… UI/UX Ä‘áº¹p, dá»… sá»­ dá»¥ng  
âœ… Tá»± Ä‘á»™ng lÆ°u Ä‘Ã¡p Ã¡n  
âœ… TÃ­nh Ä‘iá»ƒm chÃ­nh xÃ¡c  
âœ… Responsive trÃªn mobile  

**Tá»•ng Ä‘iá»ƒm tá»‘i Ä‘a: 60 Ä‘iá»ƒm**

